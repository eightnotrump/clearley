<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>clearley.match documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Clearley 0.3.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="clearley.core.html"><span>clearley.core</span></a></li><li><a href="clearley.grammar.html"><span>clearley.grammar</span></a></li><li><a href="clearley.lib.html"><span>clearley.lib</span></a></li><li class="current"><a href="clearley.match.html"><span>clearley.match</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="clearley.match.html#var-bind"><span>bind</span></a></li><li><a href="clearley.match.html#var-defbind"><span>defbind</span></a></li><li><a href="clearley.match.html#var-defmatch"><span>defmatch</span></a></li><li><a href="clearley.match.html#var-empty-rule"><span>empty-rule</span></a></li><li><a href="clearley.match.html#var-match"><span>match</span></a></li><li><a href="clearley.match.html#var-match-one"><span>match-one</span></a></li><li><a href="clearley.match.html#var-rule"><span>rule</span></a></li><li><a href="clearley.match.html#var-scanner"><span>scanner</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>clearley.match documentation</h2><pre class="doc">Fns and macros to define context-free grammars.
Emphasis is on power, flexibility, and ease of use.</pre><div class="public" id="var-bind"><h3>bind</h3><h4 class="macro">macro</h4><div class="usage"><code>(bind binding-forms &amp; body)</code></div><pre class="doc">A format for defining a rule and an action that binds to some subrules.
Syntax is as in let, except the binding values are rules.

Example:
(letrule [a rule1
          b `(:or rule2-1 rule2-2)
          [c d] rule3]
  (str rule1 rule2 rule3))</pre><div class="src-link"><a href="http://github.com/eightnotrump/clearley/blob/master/src/clearley/match.clj#L125">Source</a></div></div><div class="public" id="var-defbind"><h3>defbind</h3><h4 class="macro">macro</h4><div class="usage"><code>(defbind sym &amp; body)</code></div><pre class="doc">Like bind but defs a var.
</pre><div class="src-link"><a href="http://github.com/eightnotrump/clearley/blob/master/src/clearley/match.clj#L146">Source</a></div></div><div class="public" id="var-defmatch"><h3>defmatch</h3><h4 class="macro">macro</h4><div class="usage"><code>(defmatch sym &amp; impl-or-impls)</code></div><pre class="doc">Defines a rule and an action together. This macro is intended to be
the primary way to def rules.

Usage:
(defmatch symbol [subrules] action-body?)
(defmatch symbol ([subrules] action-body? | symbol)+)
Subrules may be a vector or a string. It can contain any rule,
but if it's a symbol, this can bind symbols in the action body.

Examples:

(defmatch true-token &quot;true&quot; true)
This matches the string &quot;true&quot; and returns true.

(defmatch sum [num \+ (num2 num)] (+ num num2)
             [num \- (num2 num)] (- num num2))
This matches any num, followed by + or -, followed by another num,
and returns the value of adding or subtracting the two respectively.

(defmatch num ([\- posnum] (- posnum))
              posnum)
This matches any posnum preceded by -, returning the negation of posnum.
Or it can match a posnum directly, and return the posnum (default).

You can embed rules in named subrules, viz:
(defmatch digit [(x (char-range 0 9))] x)

Symbols in the defmatch bodies become qualified.</pre><div class="src-link"><a href="http://github.com/eightnotrump/clearley/blob/master/src/clearley/match.clj#L93">Source</a></div></div><div class="public" id="var-empty-rule"><h3>empty-rule</h3><div class="usage"></div><pre class="doc">The empty rule. Returns nil.
</pre><div class="src-link"><a href="http://github.com/eightnotrump/clearley/blob/master/src/clearley/match.clj#L15">Source</a></div></div><div class="public" id="var-match"><h3>match</h3><h4 class="macro">macro</h4><div class="usage"><code>(match &amp; impl-or-impls)</code></div><pre class="doc">Like defmatch, but doens't def a variable.
</pre><div class="src-link"><a href="http://github.com/eightnotrump/clearley/blob/master/src/clearley/match.clj#L82">Source</a></div></div><div class="public" id="var-match-one"><h3>match-one</h3><h4 class="macro">macro</h4><div class="usage"><code>(match-one clauses &amp; body)</code></div><pre class="doc">Defines a rule together with an action. If a subrule is a symbol,
it can be bound to symbols in the action body. You can also supply a
renaming binding symbol.

Examples:

(match [\- num (- num))
(match [(num1 num) \+ (num2 num)] (+ num1 num2))</pre><div class="src-link"><a href="http://github.com/eightnotrump/clearley/blob/master/src/clearley/match.clj#L56">Source</a></div></div><div class="public" id="var-rule"><h3>rule</h3><div class="usage"><code>(rule clauses)</code><code>(rule clauses action)</code><code>(rule name clauses action)</code></div><pre class="doc">Creates a context-free grammar rule. A rule has a required seq of clauses,
an optional name, and an optional action.
If not supplied, the default action bundles the args into a list.</pre><div class="src-link"><a href="http://github.com/eightnotrump/clearley/blob/master/src/clearley/match.clj#L18">Source</a></div></div><div class="public" id="var-scanner"><h3>scanner</h3><div class="usage"><code>(scanner scanner-fn)</code><code>(scanner scanner-fn action)</code><code>(scanner name scanner-fn action)</code></div><pre class="doc">Creates a rule that accepts input tokens. For a token t, if (scanner-fn t)
is logical true, this rule matches that token.
The default action returns the token.</pre><div class="src-link"><a href="http://github.com/eightnotrump/clearley/blob/master/src/clearley/match.clj#L25">Source</a></div></div></div></body></html>